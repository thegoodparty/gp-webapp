/*
 * TAILWIND CSS v4 SETUP
 * =====================
 * Per the official upgrade guide (https://tailwindcss.com/docs/upgrade-guide):
 *
 * 1. @import "tailwindcss" FIRST (replaces @tailwind directives)
 * 2. @plugin for loading plugins (replaces JS config plugins array)
 * 3. @source for content paths (replaces JS config content array)
 * 4. @theme AFTER tailwindcss (replaces JS config theme object)
 *
 * CSS variable files (design-tokens, typography, etc.) come before or after
 * as long as @theme comes AFTER @import "tailwindcss".
 */

/* 1. Raw CSS variables that @theme will reference via var() */
@import '../styleguide/design-tokens.css';

/* 2. Core Tailwind - MUST come before @theme, @plugin, @source */
@import 'tailwindcss';

/* 3. Tailwind v4 plugin (replaces plugins[] in tailwind.config.js) */
@plugin "@tailwindcss/typography";

/* 4. Content sources (replaces content[] in tailwind.config.js) */
@source "../app";
@source "../components";
@source "../styleguide";

/* 5. Theme tokens - @theme MUST come AFTER @import "tailwindcss" */
@import '../styleguide/tailwind-theme.css';

/* 6. Additional CSS */
@import '../styleguide/typography.css';
@import '../styleguide/styleguide-scope.css';
@import 'tw-animate-css';

/* Dark mode variant */
@custom-variant dark (&:is(.dark *));

/*
 * =============================================================================
 * WEBAPP DEFAULT CSS VARIABLES
 * =============================================================================
 * These define the default values for the webapp's color system.
 * Styleguide components will override these via [data-slot] scoping.
 * This enables the same Tailwind classes to resolve to different colors
 * based on whether they're used in legacy webapp code or styleguide components.
 */
:root {
  /* Primary scale (webapp's dark indigo) */
  --primary: #242D3D;
  --primary-dark: #0D1528;
  --primary-main: #242D3D;
  --primary-light: #484E55;
  --primary-background: #F7FAFB;
  --primary-contrast: #FFFFFF;
  
  /* Secondary scale (webapp's yellow) */
  --secondary: #FFC523;
  --secondary-dark: #DBA219;
  --secondary-main: #FFC523;
  --secondary-light: #FFE291;
  --secondary-background: #FFFADF;
  --secondary-contrast: #000000;
  
  /* Tertiary scale (webapp's purple) */
  --tertiary: #6E37FF;
  --tertiary-dark: #3D1BB7;
  --tertiary-main: #6E37FF;
  --tertiary-light: #AE86FF;
  --tertiary-background: #F8F3FF;
  --tertiary-contrast: #FFFFFF;
  
  /* Neutral scale (webapp's indigo-gray) */
  --neutral: #B9C3CC;
  --neutral-dark: #484E55;
  --neutral-main: #B9C3CC;
  --neutral-light: #E0E6EC;
  --neutral-background: #F7FAFB;
  --neutral-contrast: #000000;
  
  /* Error scale */
  --error: #E00C30;
  --error-dark: #93081F;
  --error-main: #E00C30;
  --error-light: #F56C6A;
  --error-background: #FFE8E8;
  --error-contrast: #FFFFFF;
  
  /* Success scale */
  --success: #30A541;
  --success-dark: #0F5F31;
  --success-main: #30A541;
  --success-light: #86E382;
  --success-background: #EEFFE9;
  --success-contrast: #FFFFFF;
  
  /* Info scale */
  --info: #1B6AFC;
  --info-dark: #0D3CB5;
  --info-main: #1B6AFC;
  --info-light: #75AFFE;
  --info-background: #E3F1FF;
  --info-contrast: #FFFFFF;
  
  /* Warning scale (aligned with Figma semantic colors) */
  --warning: #FF9800;
  --warning-dark: #DB7900;
  --warning-main: #FF9800;
  --warning-light: #FFCD66;
  --warning-background: #FFF5D5;
  --warning-contrast: #000000;
  
  /* Gray scale */
  --gray-100: #F8F8F8;
  --gray-200: #E8E8E8;
  --gray-300: #B2B2B2;
  --gray-400: #999999;
  --gray-500: #7F7F7F;
  --gray-600: #666666;
  --gray-700: #4D4D4D;
  --gray-800: #333333;
  --gray-900: #1A1A1A;
  
  /* Indigo scale */
  --indigo-50: #F7FAFB;
  --indigo-100: #EEF3F6;
  --indigo-200: #E0E6EC;
  --indigo-300: #B9C3CC;
  --indigo-400: #879099;
  --indigo-500: #484E55;
  --indigo-600: #343D49;
  --indigo-700: #242D3D;
  --indigo-800: #161F31;
  --indigo-900: #0D1528;
  
  /* Blue scale */
  --blue-50: #E3F1FF;
  --blue-100: #D1E7FE;
  --blue-200: #A3CDFE;
  --blue-300: #75AFFE;
  --blue-400: #2563EB;
  --blue-500: #1B6AFC;
  --blue-600: #1351D8;
  --blue-700: #0D3CB5;
  --blue-800: #082A92;
  --blue-900: #051D78;
  
  /* Green scale */
  --green-50: #EEFFE9;
  --green-100: #DFFAD6;
  --green-200: #B9F6B0;
  --green-300: #86E382;
  --green-400: #5EC963;
  --green-500: #30A541;
  --green-600: #187637;
  --green-700: #0F5F31;
  --green-800: #094F2D;
  --green-900: #033A20;
  
  /* Red/Error scale (aligned with Figma error tokens) */
  --red-50: #FFE8E8;
  --red-100: #FDCDCD;
  --red-200: #FFAEAE;
  --red-300: #F56C6A;
  --red-400: #EC4451;
  --red-500: #E00C30;
  --red-600: #B90A27;
  --red-700: #93081F;
  --red-800: #6C0617;
  --red-900: #560311;
  --red-950: #370009;
  
  /* Yellow scale */
  --yellow-50: #FFFADF;
  --yellow-100: #FFF1C9;
  --yellow-200: #FFEDBA;
  --yellow-300: #FFE291;
  --yellow-400: #FFE06C;
  --yellow-500: #FFD759;
  --yellow-600: #FFC523;
  --yellow-700: #DBA219;
  --yellow-800: #B78211;
  --yellow-900: #93640B;
  
  /* Orange/Warning scale (aligned with Figma warning tokens) */
  --orange-50: #FFF5D5;
  --orange-100: #FFEEB7;
  --orange-200: #FDE19A;
  --orange-300: #FFCD66;
  --orange-400: #FFB93F;
  --orange-500: #FF9800;
  --orange-600: #DB7900;
  --orange-700: #B75E00;
  --orange-800: #934500;
  --orange-900: #7A3400;
  --orange-950: #471E00;
  
  /* Lime scale (webapp legacy - used by PromoBanner) */
  --lime-50: #FEFFF2;
  --lime-100: #FCFEE0;
  --lime-200: #F8FDC2;
  --lime-300: #F1FBA3;
  --lime-400: #EAF78B;
  --lime-500: #DFF265;
  --lime-600: #C5D465;
  --lime-700: #A6B649;
  --lime-800: #889832;
  --lime-900: #6A7A20;
  
  /* Purple scale */
  --purple-50: #F8F3FF;
  --purple-100: #E6D7FF;
  --purple-200: #CBAFFF;
  --purple-300: #AE86FF;
  --purple-400: #9669FF;
  --purple-500: #6E37FF;
  --purple-600: #5428DB;
  --purple-700: #3D1BB7;
  --purple-800: #2A1193;
  --purple-900: #1C0A7A;
  
  /* Misc */
  --cream-500: #FCF8F3;
  --cream: #FCF8F3;
  
  /* Chart/Data visualization colors (from Figma) */
  --chart-1: #5975A6;
  --chart-2: #CDA1FF;
  --chart-3: #63D1A0;
  --chart-4: #FFC523;
  --chart-5: #FF9364;
}

/*
 * TAILWIND THEME
 * The @theme block is in styleguide/tailwind-theme.css
 * This keeps globals.css focused on webapp-specific defaults and styles.
 */

@layer components {
  .button-primary {
    background-color: var(--component-button-primary-background-default);
    color: var(--component-button-primary-text-default);
    border-color: var(--component-button-primary-border-default);
    box-shadow: var(--component-button-primary-box-shadow-default);
    opacity: var(--component-button-primary-opacity-default);
  }
  .button-primary:hover:not(:disabled) {
    background-color: var(--component-button-primary-background-hover);
    border-color: var(--component-button-primary-border-hover);
    box-shadow: var(--component-button-primary-box-shadow-hover);
  }
  .button-primary:disabled {
    background-color: var(--component-button-primary-background-disabled);
    color: var(--component-button-primary-text-disabled);
    border-color: var(--component-button-primary-border-disabled);
    opacity: var(--component-button-primary-opacity-disabled);
  }

  .button-secondary {
    background-color: var(--component-button-secondary-background-default);
    color: var(--component-button-secondary-text-default);
    border-color: var(--component-button-secondary-border-default);
    box-shadow: var(--component-button-secondary-box-shadow-default);
    opacity: var(--component-button-secondary-opacity-default);
  }
  .button-secondary:hover:not(:disabled) {
    background-color: var(--component-button-secondary-background-hover);
    border-color: var(--component-button-secondary-border-hover);
  }
  .button-secondary:disabled {
    background-color: var(--component-button-secondary-background-disabled);
    color: var(--component-button-secondary-text-disabled);
    border-color: var(--component-button-secondary-border-disabled);
    opacity: var(--component-button-secondary-opacity-disabled);
  }

  .button-destructive {
    background-color: var(--component-button-destructive-background-default);
    color: var(--component-button-destructive-text-default);
    border-color: var(--component-button-destructive-border-default);
    box-shadow: var(--component-button-destructive-box-shadow-default);
    opacity: var(--component-button-destructive-opacity-default);
  }
  .button-destructive:hover:not(:disabled) {
    background-color: var(--component-button-destructive-background-hover);
    border-color: var(--component-button-destructive-border-hover);
  }
  .button-destructive:disabled {
    background-color: var(--component-button-destructive-background-disabled);
    color: var(--component-button-destructive-text-disabled);
    border-color: var(--component-button-destructive-border-disabled);
    opacity: var(--component-button-destructive-opacity-disabled);
  }

  .button-outline {
    background-color: var(--component-button-outline-background-default);
    color: var(--component-button-outline-text-default);
    border-color: var(--component-button-outline-border-default);
    box-shadow: var(--component-button-outline-box-shadow-default);
    opacity: var(--component-button-outline-opacity-default);
  }
  .button-outline:hover:not(:disabled) {
    background-color: var(--component-button-outline-background-hover);
    border-color: var(--component-button-outline-border-hover);
  }
  .button-outline:disabled {
    background-color: var(--component-button-outline-background-disabled);
    color: var(--component-button-outline-text-disabled);
    border-color: var(--component-button-outline-border-disabled);
    opacity: var(--component-button-outline-opacity-disabled);
  }

  .button-ghost {
    background-color: var(--component-button-ghost-background-default);
    color: var(--component-button-ghost-text-default);
    border-color: var(--component-button-ghost-border-default);
    box-shadow: var(--component-button-ghost-box-shadow-default);
    opacity: var(--component-button-ghost-opacity-default);
  }
  .button-ghost:hover:not(:disabled) {
    background-color: var(--component-button-ghost-background-hover);
    border-color: var(--component-button-ghost-border-hover);
  }
  .button-ghost:disabled {
    background-color: var(--component-button-ghost-background-disabled);
    color: var(--component-button-ghost-text-disabled);
    border-color: var(--component-button-ghost-border-disabled);
    opacity: var(--component-button-ghost-opacity-disabled);
  }

  .button-link {
    background-color: var(--component-button-link-background-default);
    color: var(--component-button-link-text-default);
    border-color: var(--component-button-link-border-default);
    box-shadow: var(--component-button-link-box-shadow-default);
    opacity: var(--component-button-link-opacity-default);
    text-decoration: underline;
    text-underline-offset: 4px;
  }
  .button-link:hover:not(:disabled) {
    background-color: var(--component-button-link-background-hover);
    color: var(--component-button-link-text-hover);
    border-color: var(--component-button-link-border-hover);
  }
  .button-link:disabled {
    background-color: var(--component-button-link-background-disabled);
    color: var(--component-button-link-text-disabled);
    border-color: var(--component-button-link-border-disabled);
    opacity: var(--component-button-link-opacity-disabled);
  }

  /* Loading states preserve original colors */
  .button-primary[data-loading='true'] {
    color: var(--component-button-primary-text-loading);
  }
  .button-secondary[data-loading='true'] {
    color: var(--component-button-secondary-text-loading);
  }
  .button-destructive[data-loading='true'] {
    color: var(--component-button-destructive-text-loading);
  }
  .button-outline[data-loading='true'] {
    color: var(--component-button-outline-text-loading);
  }
  .button-ghost[data-loading='true'] {
    color: var(--component-button-ghost-text-loading);
  }
  .button-link[data-loading='true'] {
    color: var(--component-button-link-text-loading);
  }

  /* White Button Variants */
  .button-whiteGhost {
    background-color: transparent !important;
    color: var(--semantic-text-inverse) !important;
    border: none !important;
    border-color: transparent !important;
    box-shadow: none !important;
    opacity: 1;
  }
  .button-whiteGhost:hover:not(:disabled) {
    background-color: rgba(255, 255, 255, 0.1) !important;
    border: none !important;
    border-color: transparent !important;
    box-shadow: none !important;
  }
  .button-whiteGhost:disabled {
    background-color: transparent !important;
    color: var(--semantic-text-inverse) !important;
    border: none !important;
    border-color: transparent !important;
    box-shadow: none !important;
    opacity: 0.5;
  }

  .button-whiteOutline {
    background-color: transparent;
    color: var(--semantic-text-inverse);
    border: 1px solid var(--semantic-text-inverse);
    opacity: 1;
  }
  .button-whiteOutline:hover:not(:disabled) {
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px solid var(--semantic-text-inverse);
  }
  .button-whiteOutline:disabled {
    background-color: transparent;
    color: var(--semantic-text-inverse);
    border: 1px solid var(--semantic-text-inverse);
    opacity: 0.5;
  }
}

@layer utilities {
  .animate-in {
    animation-name: enter;
    animation-duration: var(--tw-enter-duration, 150ms);
    --tw-enter-opacity: initial;
    --tw-enter-scale: initial;
    --tw-enter-rotate: initial;
    --tw-enter-translate-x: initial;
    --tw-enter-translate-y: initial;
  }

  .animate-out {
    animation-name: exit;
    animation-duration: var(--tw-exit-duration, 150ms);
    --tw-exit-opacity: initial;
    --tw-exit-scale: initial;
    --tw-exit-rotate: initial;
    --tw-exit-translate-x: initial;
    --tw-exit-translate-y: initial;
  }

  .fade-in-0 {
    --tw-enter-opacity: 0;
  }

  .fade-out-0 {
    --tw-exit-opacity: 0;
  }

  .slide-in-from-right {
    --tw-enter-translate-x: 100%;
  }

  .slide-out-to-right {
    --tw-exit-translate-x: 100%;
  }

  .slide-in-from-left {
    --tw-enter-translate-x: -100%;
  }

  .slide-out-to-left {
    --tw-exit-translate-x: -100%;
  }

  .slide-in-from-top {
    --tw-enter-translate-y: -100%;
  }

  .slide-out-to-top {
    --tw-exit-translate-y: -100%;
  }

  .slide-in-from-bottom {
    --tw-enter-translate-y: 100%;
  }

  .slide-out-to-bottom {
    --tw-exit-translate-y: 100%;
  }

  .duration-300 {
    --tw-enter-duration: 300ms;
    --tw-exit-duration: 300ms;
  }

  .duration-500 {
    --tw-enter-duration: 500ms;
    --tw-exit-duration: 500ms;
  }

  @keyframes enter {
    from {
      opacity: var(--tw-enter-opacity, 1);
      transform: translate3d(
          var(--tw-enter-translate-x, 0),
          var(--tw-enter-translate-y, 0),
          0
        )
        scale3d(
          var(--tw-enter-scale, 1),
          var(--tw-enter-scale, 1),
          var(--tw-enter-scale, 1)
        )
        rotate(var(--tw-enter-rotate, 0));
    }
  }

  @keyframes exit {
    to {
      opacity: var(--tw-exit-opacity, 1);
      transform: translate3d(
          var(--tw-exit-translate-x, 0),
          var(--tw-exit-translate-y, 0),
          0
        )
        scale3d(
          var(--tw-exit-scale, 1),
          var(--tw-exit-scale, 1),
          var(--tw-exit-scale, 1)
        )
        rotate(var(--tw-exit-rotate, 0));
    }
  }
}

/*
 * Note: shadcn/ui HSL variables are intentionally NOT redefined here.
 * The @theme block above maps Tailwind utilities to our hex CSS variables.
 * Styleguide components use [data-slot] scoping to override these values.
 * 
 * The primary/secondary/etc variables defined in :root at the top of this file
 * use hex values for webapp compatibility. We don't override them with HSL here
 * to avoid conflicts between webapp and styleguide color systems.
 */

/* Fix for DataTableColumnHeader button border */
.button-ghost {
  border: none !important;
}

@layer base {
  * {
    outline: none;
  }

  *:focus-visible {
    outline: none  !important;
    box-shadow: none !important;
  }

  /*
   * Restore cursor: pointer and font-weight for interactive elements.
   * Tailwind v4 preflight doesn't include these by default (unlike v3).
   */
  button,
  [role="button"],
  input[type="button"],
  input[type="submit"],
  input[type="reset"],
  summary {
    cursor: pointer;
    font-weight: 500;
  }
  
  a {
    font-weight: 500;
  }

  body { 
    width: 100%;
    height: 100%;
    font-family: var(--outfit-font);
  }

  /*
   * Restore heading letter-spacing from Tailwind v3 preflight.
   * v4 preflight doesn't include this, causing headings to look different.
   * -0.02em is the standard tight tracking for headings.
   */
  h1, h2 {
    letter-spacing: -0.02em;
  }

  /*
   * Normalize line-height for SVG icons inside inline containers.
   * Prevents extra spacing around MUI icons when inside spans.
   * Scoped to exclude styleguide components.
   */
  svg:not([data-slot] *) {
    vertical-align: middle;
  }

  /*
   * Restore Tailwind v3's default line-height (1.3) for all elements.
   * v4 inherits 1.5 from body, causing widespread text/spacing diffs.
   * Excluded from styleguide components which define their own line-heights.
   */
  *:not([data-slot] *):not([data-slot]) {
    line-height: 1.3;
  }

  a:hover {
    text-decoration: underline;
  }
}

a.no-underline:hover {
  text-decoration: none;
}

/*
 * Fix for webapp flex buttons: Ensure proper horizontal layout when flex is 
 * used on legacy button/link elements (those WITHOUT data-slot).
 * 
 * This fix is scoped to webapp components only, keeping styleguide components
 * unaffected. Styleguide buttons use their own component (styleguide/button.tsx)
 * which has proper flex handling built-in.
 * 
 * The webapp Button component has text-center and inline-block in base classes.
 * When flex items-center is passed via className, we need to ensure:
 * 1. Display is flex (not inline-block)
 * 2. Direction is row (horizontal, not vertical stacking)
 */
a.flex.items-center:not([data-slot]),
button.flex.items-center:not([data-slot]),
a.inline-flex.items-center:not([data-slot]),
button.inline-flex.items-center:not([data-slot]) {
  display: flex;
  flex-direction: row;
}

.rep-red {
  color: #bf0020;
}
.dem-blue {
  color: #0027dc;
}

.MuiInputLabel-root.Mui-focused {
  color: #000;
}

.MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline {
  border-color: #000;
}

.MuiInputLabel-root.Mui-error {
  color: #d32f2f !important;
}

.MuiOutlinedInput-root.Mui-error .MuiOutlinedInput-notchedOutline {
  border-color: #d32f2f !important;
}

strong {
  font-weight: 900;
}

/*
 * List styles - scoped to content areas only
 * These styles apply to prose content (CMS, articles) and styleguide components.
 * UI lists (like TasksList, navigation, etc.) should NOT have bullets.
 */
.prose ul,
[data-slot] ul,
article ul,
.cms-content ul {
  display: block;
  list-style-type: disc;
  margin-block-start: 1em;
  margin-block-end: 1em;
  margin-inline-start: 0px;
  margin-inline-end: 0px;
  padding-inline-start: 20px;
}

.prose ul li,
[data-slot] ul li,
article ul li,
.cms-content ul li {
  display: list-item;
}

.row {
  @apply flex items-center;
}
.break-word {
  overflow-wrap: break-word;
  word-wrap: break-word;
}

.text-white {
  color: #fff;
}

@media all {
  .print-page-break {
    display: none;
  }
}

@media print {
  html,
  body {
    height: initial !important;
    overflow: initial !important;
    -webkit-print-color-adjust: exact;
  }
}

@media print {
  .print-page-break {
    margin-top: 1rem;
    display: block;
    page-break-before: always;
  }
  .hidden-for-print {
    display: none;
  }
}

@page {
  size: auto;
  margin: 20mm;
}

.pac-container {
  z-index: 9999 !important;
  border-radius: 8px;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
    0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

.pac-item {
  padding: 2px 4px !important;
  border-bottom: 1px solid #f3f4f6 !important;
  cursor: pointer;
  font-family: inherit;
}

.pac-item:hover,
.pac-item-selected {
  background-color: #f9fafb !important;
}

.pac-item:last-child {
  border-bottom: none !important;
}

.pac-matched {
  font-weight: 600;
}

@media (max-width: 768px) {
  .pac-container {
    z-index: 10000 !important;
    position: fixed !important;
    left: 8px !important;
    right: 8px !important;
    width: auto !important;
    max-width: none !important;
    border-radius: 8px;
    margin-top: 4px;
  }

  .pac-item {
    padding: 8px !important;
    font-size: 14px !important;
    line-height: 1 !important;
  }

  .pac-item .pac-icon {
    margin-right: 12px !important;
  }
}
